<script>
    //
    //Get Count Code
    //
    @*var asyncBool = false;
    var asyncFunc = async function () {
        var dot = '.';
        var dotCount = 1;
        asyncinterval = setInterval(function () {
            if (asyncBool) {
                clearInterval(asyncinterval);
            }
            else if (dotCount == 3) {
                dotCount = 1;
                dot = '.';
            } else {
                dotCount++;
                dot += '.';
            }
            if (!asyncBool) {
                $('#WaitOrderCount').text(dot);
                $('#ErrorOrderCount').text(dot);
                $('#ClosedOrderCount').text(dot);
                $('#ReconcilationOrderCount').text(dot);
            }
        }, 250);
    }
    async function SetZeroAll() {
        $('#WaitOrderCount').text(0);
        $('#ErrorOrderCount').text(0);
        $('#ClosedOrderCount').text(0);
        $('#ReconcilationOrderCount').text(0);
    }
    if ($('#ClosedOrderCount').val() != null) {
        GetCounts();
    }
    setInterval(function () {
        if ($('#ClosedOrderCount').val() != null) {
            GetCounts();
        }
    }, 60 * 1000);
    async function GetCounts() {
        var Ajjax = $.ajax({
            type: 'GET',
            url: '/Home/GetCounts',
            dataType: 'json',
            beforeSend: function () {
                asyncBool = false;
                asyncFunc.call();
            },
            success: function (response) {
                asyncBool = true;
                clearInterval(asyncFunc);
                if (response.status == '100' || response.status == '900') {
                    setTimeout(async function () {
                        if (response.text != '') {
                            toastr.info(response.text);
                        }
                        SetZeroAll()
                        $('#WaitOrderCount').text(response.obj.waitOrder);
                        $('#ErrorOrderCount').text(response.obj.errorOrder);
                        $('#ClosedOrderCount').text(response.obj.closedOrder);
                        $('#ReconcilationOrderCount').text(response.obj.reconciliationOrder);
                    }, 350);
                } else if (response.status == '999') {
                    window.location.href = response.location;
                }
            },
            error: function () {
                asyncBool = true;
            }
        });
    }*@
    //
    //Get Count Code
    //
    $(document).ready(function () {
        if ($('#NewOrderCount').val() != null) {
            GetCounts();
        }
        //$.ajax({
        //    type: "GET",
        //    url: "/Home/SideBar",
        //    success: function (response) {
        //        if (response != "false") {
        //            $("#AutoMenu").html(response);
        //        }
        //        else {
        //            if (response != "Index" && response != "false") {
        //                console.log(response);
        //                window.location.href = '/Home/Index';
        //            }
        //        }
        //    }
        //});
        $("#submit").click(function () {
            if ($('#userName').val() == '' || $('#userName').val() == null ||
                $('#password').val() == '' || $('#password').val() == null) {
                toastr.warning('Boş alan bırakmayanız');
                return false;
            }
            $.ajax({
                type: "GET",
                url: "/Home/Login?" + $('#LoginForm').serialize(),
                dataType: 'json',
                success: function (response) {
                    if (response.status == '100') {
                        window.location.href = response.location;
                    }
                    else if (response.status == '900') {
                        toastr.error(response.text);
                    }
                }
            });
        });
        $('#ListBtn', '#ReportFilterForm').click(function () {
            $.ajax({
                type: 'GET',
                url: '/Home/GetReport?' + $('#ReportFilterForm').serialize(),
                dataType: 'json',
                beforSend: function () {
                    toastr.info('Lütfen Bekleyiniz');
                },
                success: function (response) {
                    if (response.status == '100') {
                        if (response.text != "") {
                            toastr.success(response.text);
                        }
                        $('#TableReport').html(response.obj.Table);
                        SetTableType();
                    }
                    else if (response.status == '900') {
                        if (response.text != "") {
                            toastr.error(response.text);
                        }
                    }
                    else if (response.status == '999') {
                        window.location.href = response.location;
                    }
                }
            });
        });
    });
</script>
