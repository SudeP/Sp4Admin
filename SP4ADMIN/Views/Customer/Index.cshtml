@using sp4net.StrongTypesNS;
@{
    ViewBag.Title = "Müştreriler";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ITEM_TTDataTable itemTable = ViewBag.Item;
    ITEM_TTRow FirstRow = null;
    if (itemTable != null)
    {
        FirstRow = itemTable.Rows[0] as ITEM_TTRow;
    }
}
<div class="wrapper">
    <div class="row">
        <div class="col-sm-12">
            <form id="searchOrderForm" autocomplete="off">
                <div class="form-group col-lg-2">
                    <label>Başlangış Tarih</label>
                    <input type="text" class="form-control form_datetime" id="bastar" name="bastar" value="@DateTime.Now.ToString("yyyy-MM-dd")">
                </div>
                <div class="form-group col-lg-2">
                    <label>Bitiş Tarih</label>
                    <input type="text" class="form-control form_datetime" id="bittar" name="bittar" value="@DateTime.Now.ToString("yyyy-MM-dd")">
                </div>
                <div class="form-group col-lg-2">
                    <label>Müşteri Numarası</label>
                    <input type="text" class="form-control" id="RetailNum" name="RetailNum" value="">
                </div>
                <div class="form-group col-lg-2">
                    <label>Müşteri Adı</label>
                    <input type="text" class="form-control" id="RetailName" name="RetailName" value="">
                </div>
                <div class="form-group col-lg-2">
                    <label>Gsm</label>
                    <input type="text" class="form-control" id="Gsm" name="Gsm" value="">
                </div>
                <div class="form-group col-lg-2">
                    <label>Durum</label>
                    <select class="form-control" id="Statu" name="Statu">
                        <option value="">Hepsi</option>
                        <option value="YES">Aktif</option>
                        <option value="NO">Pasif</option>
                    </select>
                </div>
                <div class="col-sm-12">
                    <div class="row">
                        <div class="col-md-2">
                            <input type="button" id="ListBtn" class="form-control btn btn-success" value="Sorgula">
                        </div>
                        <div class="col-md-2 col-md-offset-8">
                            <input type="button" class="form-control btn btn-primary" data-toggle="modal" data-target="#popupArea" onclick="NewPopup();" value="Müşteri Ekle" />
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="col-sm-12">
            <section class="panel">
                <header class="panel-heading">
                    Müşteriler
                    <span class="tools pull-right">
                        <a href="javascript:;" class="fa fa-chevron-down"></a>
                    </span>
                </header>
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="display table table-bordered table-striped" id="TableBody"></table>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="1" id="popupArea" class="modal fade" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" data-dismiss="modal" id="PopupClose" class="close" type="button">×</button>
                <h4 class="modal-title">Müşteri Penceresi</h4>
            </div>
            <div class="modal-body">
                <form role="form" id="popupForm" autocomplete="off">
                    <div class="row" style="display:none;" id="DetailSide">
                        <div class="col-md-2 mb-3">
                            <label>Şirket No</label>
                            <input type="text" class="form-control" name="CorpNum" id="CorpNum" value="" readonly>
                        </div>
                        <div class="col-md-2 mb-3">
                            <label for="">Müşteri No</label>
                            <input type="text" class="form-control pull-left" name="CustNum" id="CustNum" value="" readonly>
                        </div>
                        <div class="col-md-2 mb-3">
                            <label for="">Perakende No</label>
                            <input type="text" class="form-control" name="RetailNum" id="RetailNum" value="" readonly>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="">Müşteri Ad&Soyad</label>
                            <input type="text" class="form-control" name="Name" id="Name" value="">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="">Müşteri Kodu</label>
                            <input type="text" class="form-control" name="CustCode" id="CustCode" value="">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="">Müşteri Tipi</label>
                            <select class="form-control custom-select" name="CustType" id="CustType" value="">
                                <option value="01-Bireysel">01-Bireysel</option>
                                <option value="02-Kurumsal">02-Kurumsal</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-10 mb-3">
                            <label for="">Adres</label>
                            <input type="text" class="form-control" name="Address1" id="Address1" placeholder="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-10 mb-3">
                            <input type="text" class="form-control" name="Address2" id="Address2" placeholder="">
                        </div>
                    </div>
                    <div class="row" style="display:none;">
                        <div class="col-md-4 mb-3">
                            @*<label for="">İl Kodu</label>*@
                            <input type="hidden" class="form-control" name="CityCode" id="CityCode" value="">
                        </div>
                        <div class="col-md-4 mb-3">
                            @*<label for="">Ülke Kodu</label>*@
                            <input type="hidden" class="form-control" name="CountryCode" id="CountryCode" value="">
                        </div>
                        <div class="col-md-4 mb-3">
                            @*<label for="">Posta Kodu</label>*@
                            <input type="hidden" class="form-control" name="Postal" id="Postal" value="">
                        </div>
                    </div>
                    <div class="row" style="display:none;">
                        <div class="col-md-3 mb-3">
                            @*<label for="">İlçe</label>*@
                            <input type="hidden" class="form-control" name="County" id="County" value="">
                        </div>
                        <div class="col-md-3 mb-3">
                            @*<label for="">İl</label>*@
                            <input type="hidden" class="form-control" name="City" id="City" value="">
                        </div>
                        <div class="col-md-3 mb-3">
                            @*<label for="">Ülke</label>*@
                            <input type="hidden" class="form-control" name="Country" id="Country" value="">
                        </div>
                        <div class="col-md-3 mb-3">
                            @*<label for="">Bölge</label>*@
                            <input type="hidden" class="form-control" name="State" id="State" value="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="">Cep Telefon</label>
                            <input type="text" class="form-control" name="Gsm" id="Gsm" value="">
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="">E-Mail</label>
                            <input type="email" class="form-control" name="Email" id="Email" value="">
                        </div>
                    </div>
                    <div class="row" style="display:none;">
                        <div class="col-md-4 mb-3">
                            @*<label for="">Sabit Telefon</label>*@
                            <input type="hidden" class="form-control" name="Phone" id="Phone" value="">
                        </div>
                        <div class="col-md-4 mb-3">
                            @*<label for="">Fax</label>*@
                            <input type="hidden" class="form-control" name="Fax" id="Fax" value="">
                        </div>
                    </div>
                    <div class="row" style="display:none;">
                        <div class="col-md-4 mb-3">
                            @*<label for="">Banka Transfer Kodu</label>*@
                            <input type="hidden" class="form-control" name="BankTransKey" id="BankTransKey" value="">
                        </div>
                        <div class="col-md-4 mb-3">
                            @*<label for="">Kontak</label>*@
                            <input type="hidden" class="form-control" name="Contact" id="Contact" value="">
                        </div>
                        <div class="col-md-4 mb-3">
                            @*<label for="">Satış Şartları</label>*@
                            <input type="hidden" class="form-control" name="Terms" id="Terms" value="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="">İban</label>
                            <input type="text" class="form-control" name="iban" id="iban" placeholder="">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="">Vergi Dairesi</label>
                            <input type="text" class="form-control" name="Tax" id="Tax" value="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="">Vergi/Tc No</label>
                            <input type="text" class="form-control" name="TaxNo" id="TaxNo" placeholder="">
                        </div>
                        <div class="row" style="display:none;">
                            <div class="col-md-4 mb-3">
                                @*<label for="">Banka Kodu</label>*@
                                <input type="hidden" class="form-control" name="BankCode" id="BankCode" value="">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-10 mb-3">
                            <label for="">Not</label>
                            <input type="text" class="form-control" name="Comments" id="Comments" value="">
                        </div>
                    </div>
                    <div class="mb-3" id="AddSide" style="display:none;">
                        <div class="col-md-offset-10">
                            <input type="button" class="form-control btn-success" id="NewBtn" value="Oluştur">
                        </div>
                    </div>
                    <div class="mb-3" id="UpdateSide" style="display:none;">
                        <div class="col-md-offset-10">
                            <input type="button" class="form-control btn-success" id="UpdateBtn" value="Güncelle">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div aria-hidden="false" aria-labelledby="myModalLabel" role="dialog" tabindex="1" id="popupAreaOrder" class="modal fade" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" data-dismiss="modal" id="popupCloseOrder" class="close" type="button">×</button>
                <h4 class="modal-title">Sipariş Penceresi</h4>
            </div>
            <div class="modal-body">
                <form role="form" id="popupFormOrder" autocomplete="off">
                    <div class="row">
                        <div class="col-md-4">
                            <label>Müşteri</label>
                            <input type="text" class="form-control true" id="RetailName" name="RetailName" />
                            <input type="hidden" id="RetailNum" name="RetailNum" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <label>Açıklama</label>
                            <input type="text" class="form-control" id="Description" name="Description" value="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <label>Ürün</label>
                            <select class="form-control" id="itemCode" name="itemCode">
                                @{
                                    if (itemTable != null)
                                    {
                                        foreach (ITEM_TTRow row in itemTable.Rows)
                                        {
                                            if (row.Statu.ToString().ToLower() == "true")
                                            {
                                                <option value="@row.itemCode">@row.ItemName</option>
                                            }
                                        }
                                    }
                                }
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>Satılacak Adet</label>
                            <input type="text" class="form-control" id="qty" name="qty" value="1">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2">
                            <label>Birim Fiyatı :</label>
                            <input type="text" class="form-control true" id="Price" name="Price" value="@(FirstRow is null ? "" : FirstRow.Price.ToString())" />
                        </div>
                        <div class="col-sm-2">
                            <label>Vergi Oranı %:</label>
                            <input type="text" class="form-control true" id="TaxRate2" name="TaxRate2" value="@(FirstRow is null ? "" : FirstRow.TaxRate.ToString())" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2">
                            <label>Toplam Tutar :</label>
                            <input type="text" class="form-control true" id="TotalPrice" name="TotalPrice" value="@(FirstRow is null ? "" : FirstRow.Price.ToString())" />
                        </div>
                        <div class="col-sm-2">
                            <label>Vergi Tutarı :</label>
                            <input type="text" class="form-control true" id="TaxAmt2" name="TaxAmt2" value="@(FirstRow is null ? "" : ((FirstRow.Price * (FirstRow.TaxRate)) / 100).ToString())" />
                        </div>
                        <div class="col-sm-2">
                            <label>Genel Toplam :</label>
                            <input type="text" class="form-control" id="GrandTotal" name="GrandTotal" value="@(FirstRow is null ? "" : ((FirstRow.Price * (FirstRow.TaxRate + 100)) / 100).ToString())" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2 col-sm-offset-10">
                            <input type="button" class="form-control btn-success" id="NewBtn" value="Oluştur">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <label>Not*: Ondalıklı sayı için '.' (nokta) kullanınız.</label>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
